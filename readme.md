# OpenAPI Repository

This repository is dedicated to managing the OpenAPI specification for our project. It includes an OpenAPI file that defines our API endpoints, models, and documentation.

## Features

- **OpenAPI Specification**: The `openapi.yaml` file contains the complete API specification.
- **Validation**: Automated validation of the OpenAPI file using Spectral with custom rules.
- **Release Management**: Automated creation of Postman collections and GitHub releases when updates are pushed to the main branch.
- **Changelog Generation**: Automatic generation of a changelog using Standard Version to track changes and version history.

## GitHub Actions

### OpenAPI Validation

This action validates the `openapi.yaml` file against custom Spectral rules every time a pull request is made to the `main` branch. This ensures that all changes meet our defined standards for API specifications.

**Trigger**: On pull request to `main`.

### Release Automation

This action automates the release process:

1. **Postman Collection**: Generates an updated Postman collection from the OpenAPI file.
2. **GitHub Release**: Creates a GitHub release with the new version of the OpenAPI file.
3. **Changelog Update**: Utilizes Standard Version to update the changelog based on commit messages, adhering to semantic versioning.

**Trigger**: On push to `main` when new versions are detected.

## Changelog

The changelog is generated by Standard Version based on the commit history and is updated automatically during the release process. It helps users and contributors see what significant changes have been made in each version release.


##Using the OpenAPI file as a Mock Server

To simulate an API server using the OpenAPI specification, you can use Prism to create a mock server. This allows you to test clients and develop against your API specification without having to implement the logic.

```bash
npm i -g @stoplight/prism-cli
prism mock openapi.yaml

# 200 Response
curl http://127.0.0.1:4010/clients/dolores/clusters/test/namespaces

# Specific status code Response
curl http://127.0.0.1:4010/clients/dolores/clusters/error/namespaces -H "Prefer: code=404"
curl http://127.0.0.1:4010/clients/doloremque/clusters/ducimus/applications/a/eol -H "Prefer: example=eol_passed"

```

## Using the OpenAPI-Swagger Docker Container for Documentation

You can run a Swagger UI instance locally to view and interact with the OpenAPI documentation. Here are the commands to run Swagger UI in a Docker container, which requires the OpenAPI file to be in the current path:

```bash
# linux
docker run -p 8080:8080 -d --name swagger-ui -e SWAGGER_JSON=/openapi.yaml -v $(pwd)/openapi.yaml:/openapi.yaml swaggerapi/swagger-ui

#windows
docker run -p 8080:8080 -d --name swagger-ui -e SWAGGER_JSON=/openapi.yaml -v %cd%\openapi.yaml:/openapi.yaml swaggerapi/swagger-ui

```